{% extends 'product_service/template.html' %}
{% load static %}

{% block title %} Your Profile {% endblock %}

{% block container %}
	{% if messages %}
		{% for message in messages %}
			<div class="alert
              {% if message.tags == 'error' %}alert-danger
              {% elif message.tags == 'success' %}alert-success
              {% elif message.tags == 'warning' %}alert-warning
              {% elif message.tags == 'info' %}alert-info
              {% else %}alert-primary
              {% endif %} my-3" role="alert">
				{{ message }}
			</div>
		{% endfor %}
	{% endif %}

	<div class="user-profile p-3 shadow rounded my-3">
		<div class="d-flex justify-content-between align-items-center">
			<div class="d-flex align-items-center">
				<div class="user-photo me-3">
					<img src="{{ user.photo.url }}" alt="User Photo"
						 class="rounded-circle" width="150" height="150">
				</div>
				<div>
					<h2>{{ user.username }}</h2>
					<p>{{ user.first_name }} {{ user.last_name }}</p>
				</div>
			</div>
			<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editProfileModal">
				Edit Profile
			</button>
		</div>
	</div>

	<h1>My orders</h1>
	{% include 'account/user_orders.html' %}

	</div>
	<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel"
		 aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form method="post" enctype="multipart/form-data">
					{% csrf_token %}
					<div class="mb-3">
						<label for="id_first_name" class="form-label">First Name</label>
						<input type="text" name="first_name" id="id_first_name" class="form-control"
							   value="{{ user.first_name }}">
					</div>
					<div class="mb-3">
						<label for="id_last_name" class="form-label">Last Name</label>
						<input type="text" name="last_name" id="id_last_name" class="form-control"
							   value="{{ user.last_name }}">
					</div>
					<div class="mb-3">
						<label for="id_email" class="form-label">Email</label>
						<input type="email" name="email" id="id_email" class="form-control"
							   value="{{ user.email }}">
					</div>
					<div class="mb-3">
						<label for="id_phone" class="form-label">Phone</label>
						<input type="text" name="phone" id="id_phone" class="form-control"
							   value="{{ user.phone_number }}">
					</div>
					<div class="mb-3">
						<label for="id_photo" class="form-label">Profile Photo</label>
						<input type="file" name="photo" id="id_photo" class="form-control">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-success">Save Changes</button>
					</div>
				</form>
			</div>
		</div>
	</div>
{% endblock %}
